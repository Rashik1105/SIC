{
  "services": {
    "web": {
      "build": {
        "builder": "Nixpacks",
        "buildCommand": "pip install -r requirements.txt"
      },
      "deploy": {
        "startCommand": "gunicorn SocialInfluencersConnect.wsgi --bind 0.0.0.0:$PORT --workers 4 --threads 2 --timeout 180",
        "env": {
          "PYTHON_VERSION": "3.10",
          "CHANNELS_HOST": "tramway.proxy.rlwy.net:17713"
        }
      }
    },
    "worker": {
      "build": {
        "builder": "Nixpacks",
        "buildCommand": "pip install -r requirements.txt"
      },
      "deploy": {
        "startCommand": "celery -A SocialInfluencersConnect worker --loglevel=info --pool=solo",
        "env": {
          "PYTHON_VERSION": "3.10"
        }
      }
    },
    "beat": {
      "build": {
        "builder": "Nixpacks",
        "buildCommand": "pip install -r requirements.txt"
      },
      "deploy": {
        "startCommand": "celery -A SocialInfluencersConnect beat --loglevel=info",
        "env": {
          "PYTHON_VERSION": "3.10"
        }
      }
    },
    "channels": {
      "build": {
        "builder": "Nixpacks",
        "buildCommand": "pip install daphne[tls] -r requirements.txt"
      },
      "deploy": {
        "startCommand": "daphne -e ssl:8000:privateKey=key.pem:certKey=cert.pem SocialInfluencersConnect.asgi:application",
        "env": {
          "PYTHON_VERSION": "3.10",
          "RAILWAY_ENVIRONMENT": "production"
        }
      }
    }
  }
}
